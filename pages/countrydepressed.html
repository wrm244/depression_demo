<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src = "../js/echarts.min.js"></script>
    <script type="text/javascript" src = "../js/jquery-3.2.1.min.js"></script>
</head>
<body>
<div id = "main" style = "width: 300px;height:180px">
    <h3 class="header-title" style="color: #6bff7d;">1985年至2016年各个国家抑郁人数</h3>

</div>

<script type="text/javascript">
    $(function () {
        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        $.getJSON("https://bdapi.gxist.cn/api/country-depressed",function(values) {

            var xdata=[]
            var ydata=[]
            for(var i=0;i<values["data"].length;i++){
				 for (var j = 0; j < values["data"].length - 1 - i; j++) {
					if (values["data"][j]["depressedCountry"] > values["data"][j+1]["depressedCountry"]) {        // 相邻元素两两对比
						var temp = values["data"][j+1]["depressedCountry"];        // 元素交换
						values["data"][j+1]["depressedCountry"] = values["data"][j]["depressedCountry"];
						values["data"][j]["depressedCountry"] = temp;
					}
					xdata.push(values["data"][j]["country"])
					ydata.push(values["data"][j]["depressedCountry"])
				}
            }
            console.log(xdata)
            console.log(ydata)
            var option;

            option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '0%',
                    top:'10px',
                    right: '0%',
                    bottom: '4%',
                containLabel: true
                },
                xAxis: [{
                    name:'国家名称',
        type: 'category',
        data: xdata,
        axisLabel:{  
            interval:0,//横轴信息全部显示  
            rotate:-15,//-15度角倾斜显示  
            show: true,
         lineStyle: {
                color: "rgba(255,255,255,.1)",
                width: 1,
                type: "solid"
            },
        },
		
        axisTick: {
            show: false,
        },
		axisLabel:  {
                interval: 0,
               // rotate:50,
                show: true,
                splitNumber: 15,
                textStyle: {
 					color: "rgba(255,255,255,.6)",
                    fontSize: '12',
                },
            },
    }],
    yAxis: [{
        name:'抑郁人数',
        type: 'value',
        axisLabel: {
           //formatter: '{value} %'
			show:true,
			 textStyle: {
 					color: "rgba(255,255,255,.6)",
                    fontSize: '12',
                },
        },
        axisTick: {
            show: false,
        },
        axisLine: {
            show: true,
            lineStyle: {
                color: "rgba(255,255,255,.1	)",
                width: 1,
                type: "solid"
            },
        },
        splitLine: {
            lineStyle: {
               color: "rgba(255,255,255,.1)",
            }
        }
    }],
                series: [
                    {
                        name:'抑郁人口',
                        data: ydata,
                        type: 'bar'
                    }
                ]
            };

            option && myChart.setOption(option);

        })
    })
</script>
</body>
</html>